<section class="layout-shell">
  <header class="layout-header">
    <p class="eyebrow">Template driven sample</p>
    <h2>Product collection</h2>
    <p class="layout-subtext">
      Create a product, then watch the custom directives update the table.
    </p>
  </header>

  <div class="layout-grid">
    <section class="panel form-panel">
      <h3>Create a product</h3>
      <form class="panel-form" (ngSubmit)="submitForm()">
        <div class="mb-3">
          <label for="product-name" class="form-label">Name</label>
          <input
            class="form-control"
            name="name"
            id="product-name"
            [(ngModel)]="newProduct.name"
          />
        </div>
        <div class="mb-3">
          <label for="product-category" class="form-label">Category</label>
          <input
            class="form-control"
            name="category"
            id="product-category"
            [(ngModel)]="newProduct.category"
          />
        </div>
        <div class="mb-3">
          <label for="product-price" class="form-label">Price</label>
          <input
            class="form-control"
            name="price"
            id="product-price"
            [(ngModel)]="newProduct.price"
          />
        </div>
        <button class="btn btn-primary mt-2" type="submit">Create</button>
      </form>
    </section>

    <section class="panel data-panel">
      <div class="signal-card">
        <div>
          <span class="label">Name signal</span>
          <h3>Two way directive</h3>
        </div>
        <input
          class="signal-input"
          [(appMassModel)]="newProduct.name"
          #appMassModel="appMassModel"
        />
        <div class="signal-meta">Direction: {{ appMassModel.direction }}</div>
      </div>

      <div class="table-card">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th></th>
              <th>Name</th>
              <th>Category</th>
              <th>Price</th>
            </tr>
          </thead>
          <tbody>
            @for (item of getProducts(); track item; let i = $index) {
              <tr
                [appMassAttr]="
                  getProducts().length < 6 ? 'table-success' : 'table-warning'
                "
                [product]="item"
                (changeCategory)="newProduct.category = $event"
              >
                <td>{{ i + 1 }}</td>
                <td>{{ item.name }}</td>
                <td [appMassAttr]="item.category === 'Soccer' ? 'table-info' : null">
                  {{ item.category }}
                </td>
                <td [appMassAttr]="'table-info'">{{ item.price }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </section>
  </div>
</section>
