<section class="sample-shell">
  <header class="sample-header">
    <p class="eyebrow">Template driven sample</p>
    <h2>Product collection</h2>
    <p class="subtext">
      Create a product, then watch the custom directives update the table.
    </p>
  </header>

  <div class="sample-grid">
    <section class="panel form-panel">
      <h3>Create a product</h3>
      <form class="panel-form" (ngSubmit)="submitForm()">
        <div class="mb-3">
          <label class="form-label">Name</label>
          <input
            class="form-control"
            name="name"
            [(ngModel)]="newProduct.name"
            />
        </div>
        <div class="mb-3">
          <label class="form-label">Category</label>
          <input
            class="form-control"
            name="category"
            [(ngModel)]="newProduct.category"
            />
        </div>
        <div class="mb-3">
          <label class="form-label">Price</label>
          <input
            class="form-control"
            name="price"
            [(ngModel)]="newProduct.price"
            />
        </div>
        <button class="btn btn-primary mt-2" type="submit">Create</button>
      </form>
    </section>

    <section class="panel data-panel">
      <div class="signal-card">
        <div>
          <span class="label">Name signal</span>
          <h3>Two way directive</h3>
        </div>
        <input
          class="signal-input"
          [(massModel)]="newProduct.name"
          #massModel="massModel"
          />
        <div class="signal-meta">
          Direction: {{ massModel.direction }}
        </div>
      </div>

      <div class="table-card">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th></th>
              <th>Name</th>
              <th>Category</th>
              <th>Price</th>
            </tr>
          </thead>
          <tbody>
            @for (item of getProducts(); track item; let i = $index) {
              <tr
              [mass-attr]="
                getProducts().length < 6 ? 'table-success' : 'table-warning'
              "
                [mass-product]="item"
                (mass-category)="newProduct.category = $event"
                >
                <td>{{ i + 1 }}</td>
                <td>{{ item.name }}</td>
                <td [mass-attr]="item.category == 'Soccer' ? 'table-info' : null">
                  {{ item.category }}
                </td>
                <td [mass-attr]="'table-info'">{{ item.price }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </section>
  </div>
</section>
