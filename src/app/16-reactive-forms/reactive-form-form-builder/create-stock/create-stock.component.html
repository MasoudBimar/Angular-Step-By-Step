<section class="form-shell">
  <header class="form-header">
    <h2>Create Stock Form</h2>
    <p>Powered by FormBuilder with live validation feedback.</p>
  </header>

  <form class="stock-form" [formGroup]="stockForm" (ngSubmit)="onSubmit()">
    <label class="field" for="stockName">
      <span>Stock Name</span>
      <input
        id="stockName"
        type="text"
        class="form-control"
        [class.is-invalid]="
          stockForm.get('name')?.invalid &&
          (stockForm.get('name')?.dirty || stockForm.get('name')?.touched)
        "
        placeholder="Stock Name"
        name="stockName"
        formControlName="name"
        />
      @if (
        stockForm.get('name')?.invalid &&
        (stockForm.get('name')?.dirty || stockForm.get('name')?.touched)
        ) {
        <span
          class="invalid-feedback d-block"
          >
          Name is required
        </span>
      }
    </label>

    <label class="field" for="stockCode">
      <span>Stock Code</span>
      <input
        id="stockCode"
        type="text"
        class="form-control"
        [class.is-invalid]="
          stockForm.get('code')?.invalid &&
          (stockForm.get('code')?.dirty || stockForm.get('code')?.touched)
        "
        placeholder="Stock Code"
        formControlName="code"
        />
      @if (
        stockForm.get('code')?.errors &&
        stockForm.get('code')?.invalid &&
        (stockForm.get('code')?.dirty || stockForm.get('code')?.touched)
        ) {
        <span
          class="invalid-feedback d-block"
          >
          @if (stockForm.get('code')?.errors?.['required']) {
            <span>
              Stock Code is required
            </span>
          }
          @if (stockForm.get('code')?.errors?.['minlength']) {
            <span>
              Stock Code must be at least 2 characters
            </span>
          }
        </span>
      }
    </label>

    <label class="field" for="stockPrice">
      <span>Stock Price</span>
      <input
        id="stockPrice"
        type="number"
        class="form-control"
        [class.is-invalid]="
          stockForm.get('price')?.invalid &&
          (stockForm.get('price')?.dirty || stockForm.get('price')?.touched)
        "
        placeholder="Stock Price"
        formControlName="price"
        />
      @if (
        stockForm.get('price')?.invalid &&
        (stockForm.get('price')?.dirty || stockForm.get('price')?.touched)
        ) {
        <span
          class="invalid-feedback d-block"
          >
          @if (stockForm.get('price')?.errors?.['required']) {
            <span>
              Stock Price is required
            </span>
          }
          @if (stockForm.get('price')?.errors?.['min']) {
            <span>
              Stock price must be positive
            </span>
          }
        </span>
      }
    </label>

    <div class="form-actions">
      <button class="btn btn-primary" type="submit">Submit</button>
    </div>
  </form>

  <div class="form-meta">
    <div class="meta-card">
      <h4>Form Control value</h4>
      <code class="json-output">{{ stockForm.value | json }}</code>
    </div>
    <div class="meta-card">
      <h4>Form Control status</h4>
      <code class="json-output">{{ stockForm.status | json }}</code>
    </div>
  </div>
</section>
