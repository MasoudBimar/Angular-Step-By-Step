<section class="layout-shell">
  <header class="layout-header">
    <p class="eyebrow">Multi-step form</p>
    <h2>Profile onboarding</h2>
    <p class="layout-subtext">Complete each step to unlock the next section.</p>
  </header>

  <div class="stepper">
    <div
      class="step"
      [class.active]="formStep === 0"
      [class.complete]="formStep > 0"
    >
      <span>1</span>
      <p>User</p>
    </div>
    <div
      class="step"
      [class.active]="formStep === 1"
      [class.complete]="formStep > 1"
    >
      <span>2</span>
      <p>Details</p>
    </div>
    <div class="step" [class.active]="formStep === 2">
      <span>3</span>
      <p>Feedback</p>
    </div>
  </div>

  <form
    class="wizard-form"
    (ngSubmit)="submitForm()"
    [formGroup]="multiStepForm"
  >
    @if (formStep === 0) {
      <ng-container formGroupName="userDetail">
        <section class="step-card">
          <h3>User Details</h3>
          <div class="mb-3">
            <label class="form-label" for="fullName">Full Name</label>
            <input
              type="text"
              class="form-control"
              formControlName="fullName"
              name="fullName"
              id="fullName"
              autocomplete="off"
            />
            @if (
              userDetailForm.get("fullName")?.invalid &&
              userDetailForm.get("fullName")?.touched
            ) {
              <span class="field-error"> * fullName is required </span>
            }
          </div>
          <div class="mb-3">
            <label class="form-label" for="email">Email</label>
            <input
              type="text"
              class="form-control"
              formControlName="email"
              name="email"
              id="email"
              autocomplete="off"
            />
            @if (
              userDetailForm.get("email")?.invalid &&
              userDetailForm.get("email")?.touched
            ) {
              <span class="field-error"> * email is required </span>
            }
          </div>
          <div class="mb-3">
            <label class="form-label" for="password">Password</label>
            <input
              type="password"
              class="form-control"
              formControlName="password"
              name="password"
              id="password"
              autocomplete="off"
            />
            @if (
              userDetailForm.get("password")?.invalid &&
              userDetailForm.get("password")?.touched
            ) {
              <span class="field-error"> * password is required </span>
            }
          </div>
        </section>
      </ng-container>
    }

    @if (formStep === 1) {
      <ng-container formGroupName="additionalDetail">
        <section class="step-card">
          <h3>Additional Details</h3>
          <div class="mb-3">
            <label class="form-label" for="phoneNumber">Phone Number</label>
            <input
              type="text"
              class="form-control"
              formControlName="phoneNumber"
              name="phoneNumber"
              id="phoneNumber"
              autocomplete="off"
            />
            @if (
              additionalDetailForm.get("phoneNumber")?.invalid &&
              additionalDetailForm.get("phoneNumber")?.touched
            ) {
              <span class="field-error">
                * 10 digit phoneNumber is required
              </span>
            }
          </div>
          <div class="mb-3">
            <label class="form-label" for="address">Address</label>
            <input
              type="text"
              class="form-control"
              formControlName="address"
              name="address"
              id="address"
              autocomplete="off"
            />
            @if (
              additionalDetailForm.get("address")?.invalid &&
              additionalDetailForm.get("address")?.touched
            ) {
              <span class="field-error"> * address is required </span>
            }
          </div>
          <div class="mb-3">
            <label class="form-label" for="country">Country</label>
            <input
              type="text"
              class="form-control"
              formControlName="country"
              name="country"
              id="country"
              autocomplete="off"
            />
            @if (
              additionalDetailForm.get("country")?.invalid &&
              additionalDetailForm.get("country")?.touched
            ) {
              <span class="field-error"> * country is required </span>
            }
          </div>
          <div class="mb-3">
            <label class="form-label" for="gender">Gender</label>
            <select
              class="form-control"
              formControlName="gender"
              name="gender"
              id="gender"
              autocomplete="off"
            >
              <option>select gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
            @if (
              additionalDetailForm.get("gender")?.invalid &&
              additionalDetailForm.get("gender")?.touched
            ) {
              <span class="field-error"> * gender is required </span>
            }
          </div>
        </section>
      </ng-container>
    }

    @if (formStep === 2) {
      <ng-container formGroupName="feedback">
        <section class="step-card">
          <h3>Feedback</h3>
          <div class="mb-3">
            <label class="form-label" for="comment">Feedback</label>
            <textarea
              type="text"
              class="form-control"
              formControlName="comment"
              name="comment"
              id="comment"
              autocomplete="off"
            ></textarea>
          </div>
        </section>
      </ng-container>
    }

    <section class="wizard-actions">
      @if (formStep > 0) {
        <button class="btn btn-success" (click)="goBack()" type="button">
          Previous
        </button>
      }
      @if (formStep < 2) {
        <button class="btn btn-secondary" (click)="goForward()" type="button">
          Next
        </button>
      }
      @if (formStep === 2) {
        <button class="btn btn-primary" type="submit">Submit</button>
      }
    </section>
  </form>
</section>
