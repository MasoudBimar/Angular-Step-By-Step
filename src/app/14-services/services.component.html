<section class="container py-4">
  <div
    class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3"
  >
    <div>
      <h2 class="mb-1">Users</h2>
      <p class="text-muted mb-0">
        Manage the user directory with quick actions.
      </p>
    </div>
  </div>

  <ng-container *ngIf="users$ | async as users; else loading">
    <div class="card shadow-sm">
      <div class="card-body">
        <div
          class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3"
        >
          <h5 class="card-title mb-0">User List</h5>
          <span class="badge bg-secondary"
            >Total: {{ users?.length || 0 }}</span
          >
        </div>
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">User Name</th>
                <th scope="col">Email</th>
                <th scope="col">Address</th>
                <th scope="col" class="text-end">Tools</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="
                  let user of users;
                  trackBy: trackByUserId;
                  let i = index
                "
              >
                <td>{{ i + 1 }}</td>
                <td>{{ user.name }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>
                  {{ user.address.street }}, {{ user.address.city }}
                  {{ user.address.zipcode }}
                </td>
                <td class="text-end">
                  <div class="btn-group btn-group-sm" role="group">
                    <button
                      class="btn btn-outline-primary"
                      (click)="edit(user)"
                    >
                      Edit
                    </button>
                    <button
                      class="btn btn-outline-info"
                      (click)="info(user.id)"
                    >
                      Info
                    </button>
                    <button
                      class="btn btn-outline-danger"
                      (click)="delete(user.id)"
                    >
                      Delete
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #loading>
    <div class="d-flex align-items-center gap-2 text-muted">
      <span
        class="spinner-border spinner-border-sm"
        role="status"
        aria-hidden="true"
      ></span>
      <span>Loading users...</span>
    </div>
  </ng-template>
</section>
